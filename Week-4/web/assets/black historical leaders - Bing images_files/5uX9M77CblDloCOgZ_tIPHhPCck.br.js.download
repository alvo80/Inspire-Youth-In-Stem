var SvCtrlV2_5;(function(n){n.NarrowImageClassName="b_nrrwimg";n.NarrowImageRightClassName="b_nrrwimgr";n.NarrowImageBottomClassName="b_nrrwimgb";n.HasFlyoutClassName="b_flyt";n.FlyoutActiveClassName="b_scactive";n.SublabelActiveClassName="b_scslbl";n.ErrDispClassName="b_scdisp";n.TargetString="target";n.DeactivateClassName="scdactve";n.errorstateVisible="errvsbl";n.errorstateInvisible="errinvsbl";n.SavableEntityClass="isv";n.SavedClassName="saved";n.SaveCtrlContainerClassName="isvctrl";n.FlyoutErrorClassName="err";n.InProgressClassName="ing";n.GetErrClassName="b_geterr";n.FocusClass="isvfoc";n.HoverClass="b_isvhvr";n.SaveCtrlHoveredClass="b_schvr";n.CurrentElementClass="b_isvcur";n.ClassListAttr="classList";n.CollectionAttr="collection";n.CollectionItemIdAttr=n.CollectionAttr+"ItemId";n.IsSuccessAttr="isSuccess";n.ParentElementAttr="parentElement";n.UndefinedString="undefined";n.RelatedTargetAttr="relatedTarget";n.CurrentTargetAttr="currentTarget";n.TargetAttr="target";n.PixelUnit="px";n.TabIndexAttr="tabindex";n.ColListName="ColLst";n.PersBtnName="PersBtn";n.ThumbnailQueryParams="&w=40&h=40&c=7&r=0";n.SavesGenericItemDataAttr="data-saves-generic-item";n.ScrollBindDataAttr="data-scrbind";n.SaveErrorMapAttr="data-save-error-map";n.KCTNameMapDataAttr="data-kctnmmap";n.InlineCreateDataAttr="data-inline-crtcoll";n.ComponentIdDataAttr="data-svcptid";n.StandaloneDataAttr="data-svlne";n.CollectionIdDataAttr="data-svcid";n.KCTDataAttr="data-svkct";n.SavedDataAttr="data-svd";n.TypeToAttributeMap={webdoc:"url",recipe:"sid",video:"mid",image:"cid",product:"cid"};n.RemovableClassNames=[n.SavedClassName,n.FocusClass,n.HoverClass,n.InProgressClassName,n.FlyoutErrorClassName,n.SaveCtrlHoveredClass];n.observerConfig={childList:!0,subtree:!0,attributes:!0};n.CssVarIconsBackgroundColor="--icn-bg-color";n.CssVarIconLabelTextColor="--svlbl-txt-color";n.CssVarSavedIcon="--svicn-bg-img";n.CssVarUnsavedIcon="--unsvicn-bg-img";n.CssVarSavedProminentIcon="--svicn-bg-img-prominent";n.CssVarUnsavedProminentIcon="--unsvicn-bg-img-prominent";n.CssVarSaveProminentColor="#5087EC";n.CssVarSaveProminentTextColor="#FFFFFF";n.PersButtonInteractEventName="onPersButtonInteract";n.PartnerRegisterEventName="onPartnerRegister";n.DeregisterPersBtnEventName="onDeregisterPersBtn";n.UpdateHoverBoxEventName="onUpdateHoverBox";n.scEngagementEventName="onSCEngagement";n.VisualStateChangedEventName="onVisualStateChanged";n.CollectionsGottenEventName="onCollectionsGotten";n.HostSCClickedEventName="onHostSavesControlClicked";n.ControlAppendedEventName="onControlAppended";n.FavAddEventName="onFavAdd";n.FavDeleteEventName="onFavDel";n.ResizeScrollEvents=["scroll","resize"];n.CurrentElementSetEventName="onCurrentElementSet";n.UpdateSaveStateEventName="updateSaveState";n.SaveButtonClickEventName="onSaveButtonClick";n.ChevronToggleCollListEventName="onBtnToggleCollList";n.SaveButtonFocusEventName="onSaveButtonFocus";n.FocusInEventNames=["mouseenter","focusin"];n.FocusOutEventNames=["mouseleave","focusout"];n.CollListExpandEventName="onCollListExpand";n.CurrentCollIdSetEventName="onCurrentCollIdSet"})(SvCtrlV2_5||(SvCtrlV2_5={})),function(n){function h(t){return t&&f(t,n.SavableEntityClass)}function i(n,t){for(var f,r,u=[],i=2;i<arguments.length;i++)u[i-2]=arguments[i];for(f=n&&n.length||0,r=0;r<f;r++)t(n[r],u)}function l(n){try{return JSON.parse(n)}catch(t){return null}}function a(n,t){var i=n;for(var r in t)i[r]=t[r];return i}function v(n){if(n&&n.target){var t=n.target.getBoundingClientRect(),u=t.x,f=t.right,e=t.y,o=t.bottom,s=r((u+f)/2,(e+o)/2);i(s,function(n){n.tagName==="A"&&n.hasAttribute("h")&&_w.si_T&&_w.si_T(n.getAttribute("h"))})}}function y(n,t){return(n&&t)?n.contains(t):!1}function u(n){if(!n)return null;try{return n.getBoundingClientRect()}catch(t){return null}}function p(n,t){var i;if(!(n&&t))return!1;try{if(i=u(n),!i)return;var e=i.x,o=i.y,f=r(e,o);return(f===null||f===void 0?void 0:f.length)&&f.indexOf(t)>-1}catch(s){return!1}}function r(n,t){try{var i=_d.elementsFromPoint(n,t)||[];return Array.prototype.slice.call(i)}catch(r){return[]}}function w(n,t){return!n&&!t?"":n?t?"type=".concat(n,"&Comp=").concat(t):"type=".concat(n):"Comp=".concat(t)}function b(n){switch(n){case"/prism/edge/v1/image":return"image";case"/prism/edge/v1/video":return"video";case"/prism/edge/v1/web":return"webdoc";case"/prism/edge/v1/product":return"product";default:return null}}function f(t,i){if(t&&i){var r=t[n.ClassListAttr];return r&&r.contains(i)}}function e(t,i,r){t&&t[n.ClassListAttr]&&t[n.ClassListAttr][r](i)}function k(n,t){e(n,t,"add")}function d(n,t){e(n,t,"remove")}function o(n){return n&&n.tagName==="A"}function g(n,t,i){return(i===void 0&&(i=""),n&&n.children&&t)?n.querySelectorAll("."+t+i):[]}function t(n,t,i){n&&t&&i&&n.addEventListener(t,i)}function s(n,i){t(n,"keydown",function(n){n.keyCode==13&&i(n)})}function nt(n,i,r,u){if(r===void 0&&(r=!0),u===void 0&&(u=!0),n&&i){var f=o(n)?i:function(n){u&&(sj_pd(n),n.stopImmediatePropagation());i(n)};t(n,"click",f);r&&s(n,f)}}function tt(r,u){r&&u&&i(n.FocusInEventNames,function(n){t(r,n,u)})}function it(r,u){r&&u&&i(n.FocusOutEventNames,function(n){t(r,n,u)})}n.isSavableEntity=h;var c;(function(n){n.image="ImageDefault";n.video="VideoWatchLater";n.recipe="RecipeDefault";n.webdoc="WebResults";n.product="Products"})(c=n.ItemTypeToPredefinedCollections||(n.ItemTypeToPredefinedCollections={}));n.iterateThroughList=i;n.parseJsonString=l;n.objectAssign=a;n.fireOverlapping=v;n.elementContains=y;n.getClientRect=u;n.isElementInSpaceOfAnother=p;n.elementsFromPoint=r;n.getUrlParamsForTelemetry=w;n.ItemTagPathToItemType=b;n.elementHasClass=f;n.addElementClass=k;n.removeElementClass=d;n.isAnchorElement=o;n.selectChildrenOfClass=g;n.addListenerToElement=t;n.addEnterKeyListener=s;n.addClickListener=nt;n.addInListeners=tt;n.addOutListeners=it}(SvCtrlV2_5||(SvCtrlV2_5={})),function(n){function i(i,r,u){typeof t.gc!==n.UndefinedString&&t.gc(i,r,u)}function r(i,r,u,f,e){var o,s;if(f===void 0&&(f=n.currentHoveredElement),o=f||n.currentHoveredElement,o){var h=u in Constants.PredefinedCollections,l=h?Constants.PredefinedCollections[u]:null,c=n.getUrlParamsForTelemetry(n.defaultItemType,n.currentComponentId);if(o.hasAttribute(n.SavesGenericItemDataAttr)&&typeof t.agai!==n.UndefinedString)t.agai(n.parseJsonString(o.getAttribute(n.SavesGenericItemDataAttr)),u,function(n){return i(n,!0,e,!1,u)},function(){return r(!0)},n.currentComponentId);else{if(s=n.currentElementMetadata,!s){r(!0);return}h&&typeof t.ai!==n.UndefinedString?t.ai(c,s,n.defaultItemType,n.itemSchema,l,function(n){return i(n,!1,e,!1,u)},function(){return r(!0)}):typeof t.aic!==n.UndefinedString&&t.aic(c,s,n.defaultItemType,n.itemSchema,u,function(n){return i(n,!1,e,!1)},function(){return r(!0)})}}}function u(i,r,u,f){var e=f||n.currentHoveredElement,s,o;if(e)if(s=n.getUrlParamsForTelemetry(n.defaultItemType,n.currentComponentId),e.hasAttribute(n.SavesGenericItemDataAttr)&&typeof t.agnai!==n.UndefinedString)t.agnai(n.parseJsonString(e.getAttribute(n.SavesGenericItemDataAttr)),u,function(n){return i(n,!0,"Flyt",!0,"",u)},function(){return r(!0)},n.currentComponentId);else{if(o=n.currentElementMetadata,!o){r(!0);return}u&&typeof t.anc!==n.UndefinedString&&t.anc(s,o,n.defaultItemType,n.itemSchema,u,function(n){return i(n,!1,"Flyt",!0,"",u)},function(){return r(!0)})}}function f(i,r,u,f,e){var h=e||n.currentHoveredElement,o,s;h&&(o=n.localSavedItemsMap[n.currentElementMid],o)&&(s=n.getUrlParamsForTelemetry(n.defaultItemType,n.currentComponentId),h.hasAttribute(n.SavesGenericItemDataAttr)&&typeof t.dgai!==n.UndefinedString?t.dgai(s,o.cid,n.kctColls[u]||u,function(n){return i(n,u,f)},function(){return r(!1)}):u in Constants.PredefinedCollections&&typeof t.ddc!==n.UndefinedString?t.ddc(s,Constants.PredefinedCollections[u],o.cid,n.defaultItemType,function(n){return i(n,u,f)},function(){return r(!1)}):typeof t.dic!==n.UndefinedString&&t.dic(s,u,o.cid,n.defaultItemType,function(n){return i(n,u,f)},function(){return r(!1)}))}function e(i){var r,u,f;for(r in n.localSavedItemsMap)if(u=n.localSavedItemsMap[r],u.rawItem&&(f=u.rawItem,typeof t.cg!==n.UndefinedString&&t.cg(i,f)))return r;return null}var t=MySavesAPIUtils;n.getCollections=i;n.addToCollection=r;n.addToNewCollection=u;n.removeFromCollection=f;n.findMatchingGenericItemId=e}(SvCtrlV2_5||(SvCtrlV2_5={})),function(n){function t(t){if(n.itemSchema||(n.itemSchema={}),t&&t.length>0){var i=t.split(":"),r=i[0],u=i[1];n.itemSchema[r]=u}}function i(t){var i;if(!t)return null;if(i=t.dataset,i){var r=i.svptnerinfo,u=i.svitminfp,f=i.svcptid,e=i.sfmc,o=i.svmdcmp,s=i.svloc,h=i.svattr,c=i.persbtncls,l=n.parseJsonString(r)||{};return n.objectAssign(n.parseJsonString(u)||{},{PredefinedType:l,ComponentId:f,SavedFormCode:e,MetaLocInfo:{MetadataLocationId:s,MetadataLocationAttr:h,MetaLocCompName:o,PersButtonClassName:c}})}}function r(i,r){if(r){var u=r.Mapping,f=r.SourceAttr,e=r.SavedFormCode,o=r.MetaLocInfo,s=r.PredefinedType.ItemType;u&&n.iterateThroughList(u.split(","),t);i&&(n.currentComponentId=i);s&&(n.fallbackItemType=s);f&&(n.sourceAttribute=f);e&&(n.savedFormCode=e);o&&(n.metaLocInfo=o)}}function u(){n.defaultItemType="";n.defaultCollectionName="";n.defaultCollectionType="";n.defaultCollectionId=""}function f(t){var i;return(u(),!t)?!1:(n.defaultItemType=t,n.defaultCollectionType=n.ItemTypeToPredefinedCollections[t],typeof Constants.PredefinedCollections!==n.UndefinedString&&n.defaultCollectionType&&(n.defaultCollectionId=(i=Constants.PredefinedCollections[n.defaultCollectionType])===null||i===void 0?void 0:i.toString()),n.defaultCollectionType&&n.kctStringsMap&&(n.defaultCollectionName=n.kctStringsMap[n.defaultCollectionType]),!n.defaultCollectionId||!n.defaultCollectionName)?!1:!0}function e(t,r){var u=t&&t.getAttribute(n.ComponentIdDataAttr),o,f,e;(n.ctrl===null||n.ctrl===void 0?void 0:n.ctrl.dataset.bclist)&&(o=n.ctrl.dataset.bclist.toLowerCase().split(","),(o===null||o===void 0?void 0:o.indexOf(u===null||u===void 0?void 0:u.toLowerCase()))>-1)||(u&&!n.componentMap.has(u)&&(f=i(t),n.componentMap.set(u,f),n.allSourceAttributes.push(f.SourceAttr),e=f.MetaLocInfo,e&&e.PersButtonClassName&&_d.getElementsByClassName(e.PersButtonClassName).length>0&&(n.componentMap.set(e.MetaLocCompName,f),sj_evt.fire(n.PartnerRegisterEventName,f.MetaLocInfo))),r&&r(t))}n.componentMap=new Map;n.allSourceAttributes=[];n.initSinglePartnerInfo=r;n.setDefaultVariables=f;n.registerPartnerAndComponent=e}(SvCtrlV2_5||(SvCtrlV2_5={})),function(n){function k(i){var r={ItmId:n.currentElementMid,CompName:n.currentComponentId};t(s,a,r,MMInstUtils.getInstKData(i))}function d(i){var u={ColCount:i,CompName:n.currentComponentId};t(r,c,u)}function g(){var i={CompName:n.currentComponentId};t(r,l,i)}function nt(r,u){var f={ColId:u,CollName:n.localCollectionsMap.get(u),CompName:n.currentComponentId,ClkSrc:y};t(i,"",f,MMInstUtils.getInstKData(r))}function tt(r){var u={CompName:n.currentComponentId,ClkSrc:p};t(i,"",u,MMInstUtils.getInstKData(r))}function it(r,u){var f={ColId:u,ColName:n.localCollectionsMap.get(u),CompName:n.currentComponentId,ClkSrc:v};t(i,"",f,MMInstUtils.getInstKData(r))}function rt(r){var u={CompName:n.currentComponentId,Clksrc:w};t(i,"",u,MMInstUtils.getInstKData(r))}function ut(r){var u={CompName:n.currentComponentId,Clksrc:b};t(i,"",u,MMInstUtils.getInstKData(r))}function ft(i,r,f,o,s){var h={ColId:s,ItmId:r,CompName:n.currentComponentId,ClkSrc:f,IsNewCol:o?"1":"0"};t(u,e,h,MMInstUtils.getInstKData(i))}function et(i){var r={ItmId:n.currentElementMid,CompName:n.currentComponentId};t(f,e,r,MMInstUtils.getInstKData(i))}function ot(i,r,f,e){var s={ColId:r,ItmId:f,CompName:n.currentComponentId,ClkSrc:e};t(u,o,s,MMInstUtils.getInstKData(i))}function st(i){var r={ItmId:n.currentElementMid,CompName:n.currentComponentId};t(f,o,r,MMInstUtils.getInstKData(i))}function t(n,t,i,r){t===void 0&&(t="");i===void 0&&(i=null);r===void 0&&(r=null);MMInstUtils.logEvent(n,h,t,i,r)}var r="CI.Saves",s="CI.Hover",i="CI.SaveClick",u="CI.Success",f="CI.Failure",h="SaveControl",e="Saved",o="Unsaved",c="GetCollections",l="GetCollFailed",a="ShowFlyout",v="LnkClk",y="ColLst",p="CrtNewBtn",w="ColExp",b="SvCtrlBtn";n.logHoverFlyoutShown=k;n.logGetCollectionsSucceeded=d;n.logGetCollectionsFailed=g;n.logCollLstClick=nt;n.logCreateButtonClick=tt;n.logLinkClick=it;n.logCollExpandClick=rt;n.logSaveControlBtnClick=ut;n.logAddItemSucceeded=ft;n.logAddItemFailed=et;n.logDeleteItemSucceeded=ot;n.logDeleteItemFailed=st}(SvCtrlV2_5||(SvCtrlV2_5={})),function(n){function t(n){ft=n}function i(){return ft}function w(t){if(n.removeElementClass(n.currentHoveredElement,n.CurrentElementClass),n.currentElementMid=null,n.currentElementCollId&&(sj_evt.fire("onCurrentCollIdUnset",n.currentElementCollId),n.currentElementCollId=null),t){if(!e(t))return!1}else n.currentHoveredElement=null,n.currentElementTurl=null,n.currentElementMetadata=null;return!0}function f(t,i){var r,u,f;if(!t)return null;if(i){if(u=t.hasAttribute(i)?t:tt(i,t),!u)return null;if(f=u.getAttribute(i),f)return n.parseJsonString(f)}else for(r=0;r<n.allSourceAttributes.length;r++)if((u=t.hasAttribute(n.allSourceAttributes[r])?t:tt(n.allSourceAttributes[r],t),u)&&(f=u.getAttribute(n.allSourceAttributes[r]),f))return n.parseJsonString(f);return null}function ht(t,i,r){t&&(n.addElementClass(t,r),n.removeElementClass(t,i))}function ct(n){var r,t,i,u,f;if(n&&n.items){for(r=n.items,t=r.length-1;t>=0;t--)if(i=r[t],i&&i.content){if(u=i.content,!u)continue;if(f=yt(u),f)return f}return null}}function b(n){if(n){var t=n.mid,i=n.sid;return t||i}}function yi(t,i,u,f){var e=f||n.currentHoveredElement,o;e&&(n.logSaveControlBtnClick(e),o=n.elementHasClass(e,n.SavedClassName)||n.elementHasClass(n.hoverContainerSub,n.SavedClassName),!o&&(n.localSavedItemsMap===null||n.localSavedItemsMap===void 0?void 0:n.localSavedItemsMap[n.currentElementMid])&&(o=!0),o?u&&(sj_evt.fire("onSaveInProgress",e),n.removeFromCollection(d,r,t,i)):(sj_evt.fire("onSaveInProgress",e),n.addToCollection(k,r,t,e,i)))}function k(t,i,r,u,f,e){var o,s;return(f&&f!=""||(f=(s=(o=t.targetCollectionOperationStatus)===null||o===void 0?void 0:o.collection)===null||s===void 0?void 0:s.id),!(t&&t[n.IsSuccessAttr])||!f)?!1:(n.latestCollId=f,sj_evt.fire(n.CurrentCollIdSetEventName,f),u&&e&&(n.localCollectionsMap.set(f,e),n.localCollectionNames.set(e,1),typeof n.addCollectionToPicker!==n.UndefinedString&&n.addCollectionToPicker(f,e,n.currentElementTurl,null,g,!0,!0),n.showCreateNewCollHvrBtn()),wt(n.currentHoveredElement,t,i,r,f,!0))}function d(t,i,r){if(!(t&&t[n.IsSuccessAttr]))return!1;n.latestCollId=i;sj_evt.fire("onCurrentCollIdUnset",i);var u=n.localSavedItemsMap[n.currentElementMid];return bt(n.currentHoveredElement,t,r,(u===null||u===void 0?void 0:u.cid)||null,i)}function r(t){n.currentHoveredElement&&(pi(n.currentHoveredElement,t),t?n.logAddItemFailed(n.currentHoveredElement):n.logDeleteItemFailed(n.currentHoveredElement))}function pi(t,i){t&&n.isSavableEntity(t)&&(ht(t,n.InProgressClassName,n.FlyoutErrorClassName),sj_evt.fire("onSaveControlError",i?1:2))}function lt(t,i,r,u){n.standalone&&sj_evt.fire(n.scEngagementEventName,t,i,r,u)}function g(t){var u=t.currentTarget,i=u.getAttribute(n.CollectionIdDataAttr),e=u.getAttribute(n.KCTDataAttr),f=n.currentHoveredElement;if(i||e)sj_sp(t),sj_pd(t),t.stopImmediatePropagation();else return!0;n.logCollLstClick(n.currentHoveredElement,i);u.hasAttribute(n.SavedDataAttr)?n.removeFromCollection(d,r,i,n.ColListName,f):n.addToCollection(k,r,i,f,n.ColListName)}function e(t,i,r){var e,o,c,u,s,h;if(r||(c=t.closest(".".concat(n.SaveCtrlContainerClassName)),r=c.getAttribute(n.ComponentIdDataAttr)),!r)return!1;if(n.currentComponentId!=r)if(n.componentMap.has(r))n.initSinglePartnerInfo(r,n.componentMap.get(r));else return!1;if(i||(i=n.sourceAttribute),n.addElementClass(t,n.CurrentElementClass),n.currentHoveredElement=t,u=f(t,i)||f(t,n.SavesGenericItemDataAttr),u){if(n.currentElementMetadata=u,!wi(u))return!1;if(n.currentElementMid=b(u)||n.findMatchingGenericItemId(u),n.currentElementTurl=u.turl,n.currentElementTurl||(s=(o=(e=u.ThumbnailInfo)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.Thumbnail,s&&(n.currentElementTurl=s)),n.currentElementMid)h={},(n.localSavedItemsMap===null||n.localSavedItemsMap===void 0?void 0:n.localSavedItemsMap[n.currentElementMid])?(n.currentElementCollId=n.localSavedItemsMap[n.currentElementMid].lastCollection,n.currentElementCollId&&sj_evt.fire(n.CurrentCollIdSetEventName,n.currentElementCollId),h=n.localSavedItemsMap[n.currentElementMid].collections,n.addElementClass(t,n.SavedClassName),n.addElementClass(n.hoverContainerSub,n.SavedClassName)):(n.removeElementClass(n.hoverContainerSub,n.SavedClassName),n.removeElementClass(t,n.SavedClassName)),sj_evt.fire("onHoverElementSet",h);else return!1}else return!1;return!0}function wi(t){var i=t.type;if((i===null||i===void 0?void 0:i.toLowerCase())==="generic"&&t.ItemTagPath&&(i=n.ItemTagPathToItemType(t.ItemTagPath)),i||(i=n.fallbackItemType),n.defaultItemType!=i){if(ki(),!n.setDefaultVariables(i))return!1;bi()}return!0}function bi(){n.defaultCollectionType&&!n.localCollectionsMap.has(n.defaultCollectionId)&&(n.localCollectionsMap.set(n.defaultCollectionId,n.defaultCollectionName),n.localCollectionNames.set(n.defaultCollectionName,1),n.latestCollId||(n.latestCollId=n.defaultCollectionId),typeof n.addCollectionToPicker!==n.UndefinedString&&n.addCollectionToPicker(n.defaultCollectionId,n.defaultCollectionName,null,n.defaultCollectionType,g,!0,!1))}function ki(){var t;typeof n.removeCollectionFromPicker===n.UndefinedString||((t=n.localCollectionsCidMap[n.defaultCollectionId])===null||t===void 0?void 0:t.length)>0||n.localCollectionsMap.has(n.defaultCollectionId)&&n.removeCollectionFromPicker(n.defaultCollectionId)&&(n.localCollectionsMap["delete"](n.defaultCollectionId),n.localCollectionNames["delete"](n.defaultCollectionName))}function nt(t){var i,r;return t?(i=n.defaultItemType in n.TypeToAttributeMap?n.TypeToAttributeMap[n.defaultItemType]:null,!i)?t:(r=n.defaultItemType+":"+i+"=",(t.indexOf(r)!==0?r:"")+t):null}function tt(n,t){return t?_qs("["+n+"]",t):null}function o(t){for(var i=null,r=0;r<n.allSourceAttributes.length;r++)if(i=tt(n.allSourceAttributes[r]+'*="'+t+'"',n.containerElement?n.containerElement:_d),i)break;if(!i)return null;while(!n.isSavableEntity(i)&&i[n.ParentElementAttr])i=i[n.ParentElementAttr];return n.isSavableEntity(i)?i:null}function s(t,i,r,u,f,e){if(t&&i){if(!(i in n.localSavedItemsMap)){n.elementHasClass(t,n.SavedClassName)&&n.removeElementClass(t,n.SavedClassName);return}n.addElementClass(t,n.SavedClassName);r&&(t&&sj_evt.fire("Saved",t),n.logAddItemSucceeded(t,i,u,f,e))}}function it(t,i,r,u,f){t&&i&&(i in n.localSavedItemsMap||n.removeElementClass(t,n.SavedClassName),r&&(t&&sj_evt.fire("Unsaved",t),n.logDeleteItemSucceeded(t,f||p,i,u)))}function at(t,i,r,u,f){var e,o;t&&(t in n.localSavedItemsMap?(u&&n.localSavedItemsMap[t].lastCollection||(n.localSavedItemsMap[t].lastCollection=r),n.localSavedItemsMap[t].collections[r]||(n.localSavedItemsMap[t].collections[r]=!0,n.localSavedItemsMap[t].numCollections++),u?n.localSavedItemsMap[t].collectionQueue.unshift(r):n.localSavedItemsMap[t].collectionQueue.push(r)):(o={cid:f?i:nt(i),rawItem:f?f:null,collections:(e={},e[r]=!0,e),lastCollection:r,collectionQueue:[r],numCollections:1},n.localSavedItemsMap[t]=o))}function vt(t,i){if(t&&n.localSavedItemsMap[t])if(p=i,n.localSavedItemsMap[t].numCollections===1)delete n.localSavedItemsMap[t],n.currentElementMid===t&&(n.currentElementCollId=null);else{delete n.localSavedItemsMap[t].collections[i];n.localSavedItemsMap[t].numCollections--;var r=n.localSavedItemsMap[t].collectionQueue.indexOf(i);r>-1&&(n.localSavedItemsMap[t].collectionQueue.splice(r,1),n.localSavedItemsMap[t].lastCollection=n.localSavedItemsMap[t].collectionQueue.slice(-1)[0],n.currentElementMid===t&&(n.currentElementCollId=n.localSavedItemsMap[t].lastCollection))}}function yt(n){var t,i;return n.thumbnailUrl||((i=(t=n.thumbnails)===null||t===void 0?void 0:t[0])===null||i===void 0?void 0:i.thumbnailUrl)}function pt(t,i,r,u){n.localCollectionsCidMap[t]||(n.localCollectionsCidMap[t]=[]);n.localCollectionsCidMap[t].indexOf(i)<=-1&&(u?n.localCollectionsCidMap[t].push(i):n.localCollectionsCidMap[t].unshift(i));n.cidToThumbnailUrlMap[i]||(n.cidToThumbnailUrlMap[i]=r)}function di(t,i){var r,u;if(n.localCollectionsCidMap[t])return(u=n.localCollectionsCidMap[t].indexOf(i),u<=-1)?void 0:(n.localCollectionsCidMap[t].splice(u,1),((r=n.localCollectionsCidMap[t])===null||r===void 0?void 0:r[0])||null)}function gi(t,i){var r=n.parseJsonString(t.getAttribute(n.SavesGenericItemDataAttr)),u;return r?(u={url:r.ClickThroughUrl,customData:r.CustomData,domain:r.FriendlyDomainName,itemTagPath:r.ItemTagPath,title:r.Title,_type:"GenericItem"},{collectionItemId:i,content:u,itemtype:"Generic"}):null}function wt(t,i,r,u,f,e){var v=i.targetCollectionOperationStatus,y,c,h,p,w,g,tt;if(!(v&&v[n.IsSuccessAttr]))return!1;try{var b=v,k=b.itemOperationStatuses,it=n.CollectionAttr,a=b[it];if(!(k&&a&&a.id))return!1;var rt=k,d=rt[0],ut=n.IsSuccessAttr,ft=d[ut],et=n.CollectionItemIdAttr,l=d.item[et];return!ft||!l?!1:(y=f in Constants.PredefinedCollections,c=y?f:a.id,n.latestCollId=c,y&&(n.kctColls[f]=a.id),h=n.currentElementMid,h||l===null||(p=l.substring(l.indexOf(":")+1),h=p,n.currentElementMid=p),w=r?l:nt(l),pt(c,w,n.currentElementTurl,!1),n.localCollectionsMap.has(c)&&sj_evt.fire("onChangeCollThumbnail",c,n.currentElementTurl),g=h?n.localSavedItemsMap[h]:!1,tt=r?gi(t,l):null,at(h,w,c,!1,tt),n.localSavedItemsMap[h]&&lt(1,0,e?1:0,n.localSavedItemsMap[h].numCollections),t)?(s(t,h,!0,u,e,c),sj_evt.fire(n.UpdateHoverBoxEventName,c,n.localCollectionsMap.get(c),h&&n.localSavedItemsMap[h].numCollections||1),n.isSavableEntity(t)||s(o(h),h,!1),kt("onSaveAdd",i,h,t,!g)):!1}catch(ot){return!1}}function bt(t,i,r,u,f){var e=n.currentElementMid,h,s;return e?(vt(e,f),lt(0,1,0,n.localSavedItemsMap[e]?n.localSavedItemsMap[e].numCollections:0),t)?(it(t,e,!0,r,f),h=di(f,u),sj_evt.fire("onChangeCollThumbnail",f,h?n.cidToThumbnailUrlMap[h]:null),s=!n.localSavedItemsMap[e],s&&!n.isSavableEntity(t)&&it(o(e),e,!1),sj_evt.fire(n.UpdateHoverBoxEventName,f,n.localCollectionsMap.get(f),s?0:n.localSavedItemsMap[e].numCollections),kt("onSaveDel",i,e,t,s)):!1:!1}function kt(t,i,r,u,f){if(u){if(n.removeElementClass(u,n.InProgressClassName),n.currentHoveredElement===u){n.removeElementClass(n.ctrl,n.GetErrClassName);switch(t){case"onSaveAdd":n.addElementClass(n.hoverContainerSub,n.SavedClassName);break;case"onSaveDel":f&&n.removeElementClass(n.hoverContainerSub,n.SavedClassName)}n.removeElementClass(n.hoverContainerSub,n.InProgressClassName)}sj_evt.fire(t,i,r,u,f,typeof n.metaLocElement!="undefined"&&n.metaLocElement===u)}return p=null,!0}function dt(){n.logGetCollectionsFailed();n.addElementClass(n.ctrl,n.GetErrClassName);sj_evt.fire("onSaveControlError",3)}function nr(n){if(!(n&&n.content&&n.itemType))return null;var t=n.content,i=n.itemType;switch(i){case"Image":return t.imageId;case"Video":return t.videoId;case"Generic":return t.contentId||n.collectionItemId;default:return null}}function tr(t){var r;if(!t)return null;var f=t&&t[n.CollectionItemIdAttr],i=f?decodeURIComponent(f):"",u=nr(t);return u||(u=/^[a-z]+:[a-z]+=/.test(i)?i.substring(i.indexOf("=")+1):i.replace("/"+((r=t.itemType)===null||r===void 0?void 0:r.toLowerCase())+"/:","")),{contentId:u,collectionItemId:i}}function ir(t){var r,u,i;t.length<=0||(u=t.sort(function(n,t){return n.dateModified>t.dateModified?-1:1}),i=u[0],n.latestCollId=!i.knownCollectionType?i.id:(r=Constants.PredefinedCollections[i.knownCollectionType])===null||r===void 0?void 0:r.toString(),typeof n.moveCollectionToFirst!==n.UndefinedString&&n.latestCollId&&n.moveCollectionToFirst(n.latestCollId))}function rr(n,t){var r=t[0];if(n){var u=tr(n),i=u.collectionItemId,f=u.contentId;f&&i&&(n.content&&pt(r,i,yt(n.content),!0),at(f,i,r,!0,n))}}function ur(t,i){var e,o,r;i===void 0&&(i=!1);var c=t.id,u=t.title,s=t.collectionPage,h=t.knownCollectionType,f=h?(e=Constants.PredefinedCollections[h])===null||e===void 0?void 0:e.toString():c;!n.localCollectionsMap.has(f)&&u&&(n.localCollectionsMap.set(f,u),n.localCollectionNames.set(u,1),r=null,s&&((o=s.items)===null||o===void 0?void 0:o.length)&&(r=ct(s),r&&sj_evt.fire("onChangeCollThumbnail",f,r)),typeof n.addCollectionToPicker!==n.UndefinedString&&n.addCollectionToPicker(f,u,r,h||null,g,i))}function fr(t){var r,u,e,s;if(t){var f=t.collectionPage,o=t.id,i=t.knownCollectionType;(i&&(n.kctColls[(r=Constants.PredefinedCollections[i])===null||r===void 0?void 0:r.toString()]=o),e=!i?o:(u=Constants.PredefinedCollections[i])===null||u===void 0?void 0:u.toString(),n.localCollectionsMap.has(e)||ur(t),f&&f.items)&&(s=f.items,n.iterateThroughList(s,rr,e))}}function er(t){var i,r;if(!(t&&t.collections))return!1;i=t.collections;i=i.reverse();r=(i===null||i===void 0?void 0:i.length)||0;n.logGetCollectionsSucceeded(r);n.iterateThroughList(i,fr);ir(i);sj_evt.fire("onSaveGet",t);l||(l=!0);!!(n.ctrl===null||n.ctrl===void 0?void 0:n.ctrl.dataset.kctad)&&n.defaultCollectionId&&(n.latestCollId=n.defaultCollectionId);sj_evt.fire("onCollectionsGotten",r)}function rt(t){if(n.hoverContainer&&t)for(var i in t)n.hoverContainer.style.setProperty(i,t[i])}function h(i){var u=i||n.currentHoveredElement,r;if(n.hoverContainer&&u){if(t(!0),ot=_w.scrollX||_w.pageXOffset,st=_w.scrollY||_w.pageYOffset,r=n.getClientRect(u),!r){t(!1);return}var f=r.top,e=r.bottom,o=r.left,s=r.width,h=r.height,c=e>_w.innerHeight?_w.innerHeight-f:h;rt({width:s+n.PixelUnit,height:c+n.PixelUnit,top:f+st+n.PixelUnit,left:o+ot+n.PixelUnit});t(!1)}}function gt(){n.hoverContainer&&rt({display:"block"})}function c(){n.hoverContainer&&(rt({display:"none"}),sj_evt.fire("onHoverContainerHide"))}function or(t){var i=n.currentHoveredElement;i&&n.hoverContainerSub&&(n.elementHasClass(i,t)?n.addElementClass(n.hoverContainerSub,t):n.removeElementClass(n.hoverContainerSub,t))}function sr(){if(!i()){var t=ni(null);t&&w(t)&&(n.hoverContainer&&(h(),gt(),n.removeElementClass(n.hoverContainerSub,"b_scpers"),n.iterateThroughList(n.RemovableClassNames,or)),sj_evt.fire(n.ControlAppendedEventName))}}function hr(t){if(!i()){var r=t[n.RelatedTargetAttr];if(r||c(),r&&n.hoverContainer){if(n.elementContains(n.ctrl,r))return;n.isElementInSpaceOfAnother(r,n.hoverContainer)||c()}}}function ni(n){a&&sb_ct(a);var t=et;return et=n,n&&(a=sb_st(sr,vi*2)),t}function cr(t){if(!i()){var r=t[n.CurrentTargetAttr];n.currentFocusTarget=t.target;r&&n.isSavableEntity(r)?ni(r):sj_pd(t)}}function lr(t){var r,u,f;if(!i()){if(r=t[n.CurrentTargetAttr],u=t[n.RelatedTargetAttr],!u){if(f=t[n.TargetAttr],t.type!=="mouseleave"&&n.elementContains(r,f))return;c();return}if(!n.elementContains(n.ctrl,u)&&n.isSavableEntity(r)&&!n.elementContains(r,u)){if(t.type==="focusout"&&!n.elementContains(r,u)&&!n.shiftKeyDown){n.nextFocusable=u;n.ctrlBtn.focus();sj_evt.fire(n.SaveButtonFocusEventName);return}n.hoverContainer&&c();n.iterateThroughList(n.RemovableClassNames,function(t){n.removeElementClass(n.hoverContainerSub,t)});n.iterateThroughList([n.HoverClass,n.FocusClass,n.SaveCtrlHoveredClass,n.CurrentElementClass],function(t){n.removeElementClass(r,t)});n.currentHoveredElement===r&&(w(),n.currentFocusTarget==null)}}}function ar(t){n.fireOverlapping(t);sj_sp(t);var i=n.ctrl===null||n.ctrl===void 0?void 0:n.ctrl.dataset.svicnclkb;if(i==="Open")n.showFlyoutOnHover(),sj_evt.fire(n.ChevronToggleCollListEventName);else n.onSaveControlClicked(n.currentElementMid,n.currentHoveredElement,i==="OpenSave"?!1:!0)}function ti(n){if(n){var t=f(n);t&&s(n,b(t))}}function vr(t){var i=t.addedNodes,r=t.target,u;r&&(u=n.selectChildrenOfClass(r,n.SavableEntityClass),n.iterateThroughList(u,ti));n.ctrl&&i&&i.length>0&&n.iterateThroughList(i,ei)}function yr(t){for(var i=t,u={scroll:1,overlay:1,auto:1},r;i&&i.parentElement&&i!==(_d===null||_d===void 0?void 0:_d.body);){if(i.hasAttribute(n.ScrollBindDataAttr))break;r=_w===null||_w===void 0?void 0:_w.getComputedStyle(i);(r.overflow in u||r.overflowX in u||r.overflowY in u)&&(n.addListenerToElement(i,"scroll",function(){h()}),i.setAttribute(n.ScrollBindDataAttr,"1"));i=i.parentElement}}function ii(t){var i,r;if(t&&(n.elementHasClass(t,n.SaveCtrlContainerClassName)&&t.dataset.svcptid?ut(t):n.metaLocInfo&&n.elementHasClass(t,n.metaLocInfo.PersButtonClassName)&&sj_evt.fire(n.PartnerRegisterEventName,n.metaLocInfo),i=t.children,i))for(r=0;r<i.length;r++)ii(i[r])}function pr(t){var i=t;i&&(i.addedNodes&&i.addedNodes.length>0&&n.iterateThroughList(i.addedNodes,ii),i.removedNodes&&i.removedNodes.length>0&&n.iterateThroughList(i.removedNodes,function(t){n.elementHasClass(t,n.metaLocInfo===null||n.metaLocInfo===void 0?void 0:n.metaLocInfo.PersButtonClassName)&&sj_evt.fire(n.DeregisterPersBtnEventName)}),i.attributeName&&i.target&&n.metaLocInfo&&n.elementHasClass(i.target,n.metaLocInfo.PersButtonClassName)&&sj_evt.fire(n.PartnerRegisterEventName,n.metaLocInfo))}function ri(n){var t=n[1],i=n[2],u,r;t&&i&&(u=i&&nt(i),u)&&(r=o(t),r&&s(r,t,!1))}function ui(n){var t=n[1],r=n[2],i;t&&(i=o(t),vt(t,r),i&&it(i,t,!1))}function fi(t){t&&(n.addInListeners(t,cr),n.addOutListeners(t,lr),n.isSavableEntity(t)&&ti(t))}function ei(t){if(t)if(n.isSavableEntity(t))fi(t);else{var i=n.selectChildrenOfClass(t,n.SavableEntityClass);n.iterateThroughList(i,fi)}}function wr(t){y.observe(t,n.observerConfig);n.ctrl&&ei(t)}function ut(t){t&&(n.registerPartnerAndComponent(t,wr),yr(t))}function oi(t){er(t);var i=n.selectChildrenOfClass(_d.body,n.SaveCtrlContainerClassName);return n.iterateThroughList(i,ut),u&&(e(u),u=null),!0}function si(t){var i=t[1],r=t[2],u=t[3],f=t[4];e(r,u,f);h(i);gt();n.addElementClass(n.hoverContainerSub,"b_scpers");sj_evt.fire(n.ControlAppendedEventName)}function br(){var t=_d.querySelector(":root"),i,r;t&&(t.style.setProperty(n.CssVarIconsBackgroundColor,n.CssVarSaveProminentColor),t.style.setProperty(n.CssVarIconLabelTextColor,n.CssVarSaveProminentTextColor),i=getComputedStyle(t).getPropertyValue(n.CssVarSavedProminentIcon),t.style.setProperty(n.CssVarSavedIcon,i),r=getComputedStyle(t).getPropertyValue(n.CssVarUnsavedProminentIcon),t.style.setProperty(n.CssVarUnsavedIcon,r))}function hi(t){return new MutationObserver(function(i){return n.iterateThroughList(i,t)})}function ci(t){var i,r=t[1],f=n.getUrlParamsForTelemetry("",(i=_d.body.querySelector("."+n.SaveCtrlContainerClassName))===null||i===void 0?void 0:i.getAttribute(n.ComponentIdDataAttr));n.getCollections(f,oi,dt);l?e(r):u=r}function li(){var t=n.selectChildrenOfClass(_d.body,n.SaveCtrlContainerClassName);n.iterateThroughList(t,ut);n.metaLocInfo&&sj_evt.fire(n.PartnerRegisterEventName,n.metaLocInfo)}function ai(){sj_evt.unbind(n.FavAddEventName,ri);sj_evt.unbind(n.FavDeleteEventName,ui);sj_evt.unbind("ajax.unload",ai);sj_evt.unbind(n.PersButtonInteractEventName,si);sj_evt.unbind(n.CurrentElementSetEventName,ci);sj_evt.unbind(n.UpdateSaveStateEventName,li);_d.body.removeChild(n.hoverContainer);v.disconnect();y.disconnect()}function kr(){sj_evt.bind(n.FavAddEventName,ri);sj_evt.bind(n.FavDeleteEventName,ui);sj_evt.bind(n.PersButtonInteractEventName,si);sj_evt.bind("ajax.unload",ai);sj_evt.bind(n.CurrentElementSetEventName,ci,!0);sj_evt.bind(n.UpdateSaveStateEventName,li,!0)}function dr(){n.localSavedItemsMap={};n.localCollectionsMap=new Map;n.localCollectionsCidMap={};n.cidToThumbnailUrlMap={};n.localCollectionNames=new Map;n.latestCollId=null;n.currentElementCollId=null;n.currentElementMid=null;n.kctColls={};n.kctStringsMap={}}function gr(){var i,r;n.ctrl=_ge("svctrl");n.ctrl&&(t(!1),n.addListenerToElement(n.ctrl,"mousedown",sj_sp));dr();n.ctrlBtn=_ge("svctrlbtn");n.ctrlBtn&&n.addClickListener(n.ctrlBtn,ar,!0);n.hoverContainer=_ge("svhvr");n.hoverContainerSub=_ge("svhvrsub");n.hoverContainer&&(_d.body.insertBefore(n.hoverContainer,_d.body.firstChild),n.iterateThroughList(n.ResizeScrollEvents,function(t){n.addListenerToElement(_w,t,function(){return h()})}),n.addOutListeners(n.hoverContainer,hr));y=hi(vr);v=hi(pr);v.observe(_d.body,n.observerConfig);n.flyoutContainer=_ge("svflytc");n.flyoutContainer&&n.flyoutContainer.hasAttribute(n.StandaloneDataAttr)&&(n.standalone=!!n.flyoutContainer.getAttribute(n.StandaloneDataAttr));n.standalone||(r=n.getUrlParamsForTelemetry("",(i=_d.body.querySelector("."+n.SaveCtrlContainerClassName))===null||i===void 0?void 0:i.getAttribute(n.ComponentIdDataAttr)),n.getCollections(r,oi,dt));kr();_w.addEventListener("keydown",function(t){!n.shiftKeyDown&&t.shiftKey&&(n.shiftKeyDown=!0)});_w.addEventListener("keyup",function(t){!t.shiftKey&&n.shiftKeyDown&&(n.shiftKeyDown=!1)});(n.ctrl===null||n.ctrl===void 0?void 0:n.ctrl.dataset.isprom)&&br()}n.containerElement=null;n.shiftKeyDown=!1;var ft,l=!1,u=null,a,v,y,p,et,vi=0,ot=0,st=0;n.setKeepFlyoutActive=t;n.getKeepFlyoutActive=i;n.clearOrReplaceCurrentHoveredElement=w;n.metadataFromElement=f;n.switchElementClass=ht;n.getThumbnailUrlFromCollectionPage=ct;n.getMetadataId=b;n.handleSaveClick=yi;n.addItemSuccessCB=k;n.removeItemSuccessCB=d;n.actionFailureCB=r;n.handleAddStateChange=wt;n.handleRemoveStateChange=bt;gr()}(SvCtrlV2_5||(SvCtrlV2_5={})),function(n){function ht(){i&&a&&(n.removeElementClass(w,n.DeactivateClassName),n.removeElementClass(ut,n.DeactivateClassName),n.removeElementClass(a,n.FlyoutActiveClassName),n.removeElementClass(i,n.DeactivateClassName),n.addElementClass(i,n.FlyoutActiveClassName),n.setKeepFlyoutActive(!1),r.value="",r.disabled=!0,ti("0"))}function hi(){(n.currentElementTemp=null,i&&a)&&(n.addElementClass(w,n.DeactivateClassName),n.addElementClass(ut,n.DeactivateClassName),n.addElementClass(i,n.DeactivateClassName),n.addElementClass(a,n.FlyoutActiveClassName),n.removeElementClass(i,n.FlyoutActiveClassName),n.setKeepFlyoutActive(!0),r.value="",r.disabled=!1,r.focus(),n.removeElementClass(f,n.ErrDispClassName),p.setAttribute("aria-disabled","true"),ti("-1"))}function ci(t){var i=t[1],r=t[2];n.standalone||(n.removeElementClass(o.querySelector("."+n.SublabelActiveClassName),n.SublabelActiveClassName),n.currentHoveredElement===i&&kt(_ge("svctrlhvrpnling"),r))}function bt(i){if(t){i||(i=n.currentElementMid);var r=i&&n.localSavedItemsMap[i],u=r?r.lastCollection:n.latestCollId,f=u&&n.localCollectionsMap.get(u)||n.defaultCollectionName;ct(u,f,r?r.numCollections:0)}}function ct(i,r,u){var e,o=n.standalone&&((e=n.flyoutContainer===null||n.flyoutContainer===void 0?void 0:n.flyoutContainer.dataset)===null||e===void 0?void 0:e.htc)&&(!u||u==0),f;(o?(t.textContent=n.flyoutContainer.dataset.htc,tt=""):(t.textContent=r,tt=i),n.isAnchorElement(t))&&(f=yt,n.savedFormCode&&(f+="&FORM="+n.savedFormCode),o||(f+="&collId="+i),t.setAttribute("href",f),t.setAttribute(n.TargetString,"_blank"),ii(u))}function kt(t,i){if(t&&ft!==t){n.removeElementClass(ft,"b_sclbl");n.addElementClass(t,"b_sclbl");ft=t;n.removeElementClass(pt,n.SublabelActiveClassName);var r=t.querySelector(i?"onsvd":"onusvd");n.addElementClass(r,n.SublabelActiveClassName);pt=r}}function dt(t){var r,i,u,e,o;for(sj_sp(t),r=t.target.value.trim(),i=!1,u=0,e=Array.from(n.localCollectionNames.keys());u<e.length;u++)if(o=e[u],o.toLowerCase()===r.toLowerCase()){i=!0;break}ot.setAttribute("aria-disabled",r&&!i?"false":"true");p.setAttribute("aria-disabled",r&&!i?"false":"true");i?n.addElementClass(f,n.ErrDispClassName):n.elementHasClass(f,n.ErrDispClassName)&&n.removeElementClass(f,n.ErrDispClassName)}function gt(t){var i,u=t[0],r=t[1];r&&u==n.CurrentCollIdSetEventName&&ct(r,n.localCollectionsMap.get(r),n.currentElementMid&&((i=n.localSavedItemsMap[n.currentElementMid])===null||i===void 0?void 0:i.numCollections))}function li(t){var r=t[1],i;r==5?(i=_ge("svctrlmsmtcherrtxt"),n.removeElementClass(i,n.errorstateInvisible),n.addElementClass(i,n.errorstateVisible)):k&&(s.textContent=k[r],n.removeElementClass(s,n.errorstateInvisible),n.addElementClass(s,n.errorstateVisible));u(o)}function ai(t){var f=t[0],r=t[1],u=t[2],i=t[3];i===0?n.removeElementClass(n.hoverContainerSub,n.SavedClassName):n.addElementClass(n.hoverContainerSub,n.SavedClassName);ct(r,u,i)}function vi(t){var i=t[0],r=t[1];i==n.HostSCClickedEventName&&si(null,null,r)}function lt(){n.currentElementTemp=null;h.value="";n.removeElementClass(f,n.ErrDispClassName);u(d);h.disabled=!1}function yi(t){var i=t[0],r=t[1];i==n.CollectionsGottenEventName&&e!==o&&(r>0?(gt([n.CurrentCollIdSetEventName,n.currentElementCollId||n.latestCollId]),u(v)):u(l),fi())}function ni(t){var i;bt(t);c();ii((i=n.localSavedItemsMap[t])===null||i===void 0?void 0:i.numCollections)}function pi(t){var i=t[3];n.currentHoveredElement===i&&(ni(n.currentElementMid),n.addElementClass(n.hoverContainerSub,n.SavedClassName))}function wi(t){var i=t[3],r=t[4];n.currentHoveredElement===i&&(ni(n.currentElementMid),r&&n.removeElementClass(n.hoverContainerSub,n.SavedClassName))}function ti(r){i===null||i===void 0?void 0:i.setAttribute(n.TabIndexAttr,r);t===null||t===void 0?void 0:t.setAttribute(n.TabIndexAttr,r);b===null||b===void 0?void 0:b.setAttribute(n.TabIndexAttr,r);n.collectionList===null||n.collectionList===void 0?void 0:n.collectionList.setAttribute(n.TabIndexAttr,r)}function ii(n){var t=_ge("svctrlhvrnum");t&&n!==undefined&&n!==null&&(t.textContent=n>1?"+"+(n-1):"")}function nt(){var t,i,e,o;if(n.logCreateButtonClick(n.currentHoveredElement),t=g?r.value:h.value,t=t.trim(),t){for(i=0,e=Array.from(n.localCollectionNames.keys());i<e.length;i++)if(o=e[i],o.toLowerCase()===t.toLowerCase()){n.addElementClass(f,n.ErrDispClassName);return}n.currentElementTemp=n.currentHoveredElement;u(rt);n.addToNewCollection(n.addItemSuccessCB,n.actionFailureCB,t,n.currentElementTemp)}}function bi(t){n.nextFocusable.focus();n.nextFocusable=null;sj_pd(t)}function ki(t){if(!n.getKeepFlyoutActive()){var i=t.relatedTarget;if(t.type==="focusout"&&!n.elementContains(n.flyoutContainer,i)&&n.nextFocusable){bi(t);return}if(i){if(n.isElementInSpaceOfAnother(n.flyoutContainer,i))return;if(n.elementContains(n.ctrl,i))return;if(n.isElementInSpaceOfAnother(n.ctrl,i))return}at();n.clearOrReplaceCurrentHoveredElement()}}function ri(){y&&(sb_ct(y),y=null)}function ui(){var i,t,e,o;if(n.flyoutContainer&&(n.removeElementClass(n.ctrl,n.NarrowImageClassName),n.flyoutContainer.style.removeProperty("left"),n.flyoutContainer.style.removeProperty("right"),n.flyoutContainer.style.removeProperty("bottom"),n.removeElementClass(n.ctrl,n.NarrowImageRightClassName),n.removeElementClass(n.ctrl,n.NarrowImageBottomClassName),i=n.getClientRect(n.flyoutContainer),i)){var r=Math.min(n.getClientRect(_d.body).width,_w.innerWidth),s=i.width,u=i.right,f=i.left;if(f<0?u+s>r?(n.addElementClass(n.ctrl,n.NarrowImageClassName),t=(u-r)/2,f+t<=0&&(t-=st),n.flyoutContainer.style.right=t+"px"):n.addElementClass(n.ctrl,n.NarrowImageRightClassName):u>r&&(f<s?(n.addElementClass(n.ctrl,n.NarrowImageClassName),t=f/2,u-t>=r&&(t+=st),n.flyoutContainer.style.left=-1*t+"px"):n.elementHasClass(n.hoverContainerSub,"b_scpers")?(n.addElementClass(n.ctrl,n.NarrowImageRightClassName),e=n.getClientRect(n.flyoutContainer),e&&e.right>r&&(n.flyoutContainer.style.left=r-e.right-st+"px")):n.addElementClass(n.ctrl,n.NarrowImageRightClassName)),o=Math.min(n.getClientRect(_d.body).height,_w.innerHeight)-i.bottom,o<n.flyoutContainer.clientHeight||o<w.clientHeight+Math.min(3.5,n.localCollectionsMap.size)*48){n.addElementClass(n.ctrl,n.NarrowImageBottomClassName);var h=n.ctrlBtn.clientLeft,l=n.ctrlBtn.clientWidth,c=n.flyoutContainer.clientLeft,a=n.flyoutContainer.clientWidth;h>=c&&h+l<=c+a&&(n.flyoutContainer.style.bottom=n.ctrlBtn.clientHeight+"px")}}}function di(){n.latestCollId?(u(v),kt(_ge("svctrlhvrpnltxt"),!0)):u(l)}function fi(){n.flyoutContainer&&(n.addElementClass(n.ctrl,n.HasFlyoutClassName),n.removeElementClass(o.querySelector("."+n.SublabelActiveClassName),n.SublabelActiveClassName),n.standalone||ui(),vt&&n.standalone||(n.logHoverFlyoutShown(n.currentHoveredElement),vt=!0),sj_evt.fire("onResetScroll"),it=!0,ri())}function at(){n.flyoutContainer&&(n.removeElementClass(n.ctrl,n.HasFlyoutClassName),u(),ri(),it=!1)}function c(){di();it||fi()}function ei(){c();sj_evt.fire("prismFocusChange",n.currentHoveredElement)}function gi(t){t.relatedTarget&&(n.getKeepFlyoutActive()||(sj_pd(t),sj_sp(t),n.addElementClass(n.ctrl,n.HasFlyoutClassName),n.hoverContainerSub&&n.addElementClass(n.hoverContainerSub,"b_schvr"),sj_evt.fire("onSaveHover"),n.flyoutContainer&&(et&&!y?y=sb_st(ei,et):ei())))}function nr(t){if(t.type==="focusout"){if(n.shiftKeyDown){n.currentFocusTarget&&n.currentFocusTarget.focus();t.stopImmediatePropagation();sj_sp(t);sj_pd(t);return}c();e.focus();return}if(!n.getKeepFlyoutActive()){var i=t.relatedTarget;if(i){if(n.elementContains(n.ctrl,i))return;if(n.isElementInSpaceOfAnother(n.hoverContainer,i))return}n.clearOrReplaceCurrentHoveredElement();t.type==="mouseleave"&&(n.removeElementClass(n.ctrl,n.HasFlyoutClassName),at())}}function tr(t){var i=n.elementsFromPoint(t.clientX,t.clientY);i&&i.length>1&&i[1].click()}function oi(t){var i=t[n.TargetString];si_ct(i,!1,t);n.logLinkClick(n.currentHoveredElement,tt);n.standalone&&(sj_evt.fire("onNewTabOpenRequest",i.getAttribute("href")),t.preventDefault());sj_sp(t)}function u(t){var f,r,u,h;if(e&&(n.removeElementClass(e,n.FlyoutActiveClassName),t===d&&(wt=e),f=t==d||t==rt,n.setKeepFlyoutActive(f),n.getKeepFlyoutActive()?n.addElementClass(n.ctrl,"b_scnapd"):n.removeElementClass(n.ctrl,"b_scnapd")),!t){e=null;sj_evt.fire(n.VisualStateChangedEventName,1);return}n.elementHasClass(n.ctrl,"b_geterr")&&(s.textContent=k[3],n.removeElementClass(s,n.errorstateInvisible),n.addElementClass(s,n.errorstateVisible),t=o);n.addElementClass(t,n.FlyoutActiveClassName);t==v&&(n.addElementClass(i,n.FlyoutActiveClassName),ht());e=t;r=null;switch(t){case v:u=_ge("svctrlpckr");u?(h=u.getAttribute("aria-expanded")==="false",r=h?3:4):r=3;break;case o:r=5;break;case l:r=3}sj_evt.fire(n.VisualStateChangedEventName,r)}function ir(){t&&(bt(),sj_evt.fire(n.VisualStateChangedEventName,2))}function si(t,i,r){c();var u=n.localSavedItemsMap[t||n.currentElementMid];u&&u.numCollections>1?sj_evt.fire(n.ChevronToggleCollListEventName):n.handleSaveClick(n.currentElementCollId||n.latestCollId,"Btn",r,i)}function rr(){l=_ge("svctrlnewbtn");a=_ge("svctrlinlineform");rt=_ge("svctrlnewint");p=_ge("svctrlinlineformcreate");v=_ge("svctrlhvr");n.flyoutContainer||(n.flyoutContainer=_ge("svflytc"));t=_ge("svctrllnk");yt=t.getAttribute("href");o=_ge("svctrlerr");s=_ge("svctrlerrtxt");i=_ge("svctrlhvrbtn");ut=_ge("svctrllstw");w=_ge("svctrlhvrpnl");b=_ge("svctrlhvrpnlbtn");ot=_ge("svctrlnewformcreate");d=_ge("svctrlnewform");l&&(h=_ge("svctrlnewformname"),n.addClickListener(_ge("svctrlnewstart"),lt),n.addClickListener(_ge("svctrlnewformback"),function(){return u(wt)}),n.addClickListener(l,lt),n.addClickListener(ot,nt),h&&(n.addEnterKeyListener(h,nt),n.addListenerToElement(h,"keyup",dt)));a&&(r=_ge("svctrlinlineformname"),n.addClickListener(_ge("svctrlinlineformback"),ht),n.addClickListener(p,nt),r&&(n.addEnterKeyListener(r,nt),n.addListenerToElement(r,"keyup",dt)))}function ur(){sj_evt.bind(n.ControlAppendedEventName,ir);sj_evt.bind("onSaveInProgress",ci);sj_evt.bind("onSaveAdd",pi);sj_evt.bind("onSaveDel",wi);sj_evt.bind("onHoverContainerHide",at);sj_evt.bind(n.CurrentCollIdSetEventName,gt);sj_evt.bind(n.UpdateHoverBoxEventName,ai);sj_evt.bind(n.SaveButtonClickEventName,c);n.standalone||sj_evt.bind("onCollListExpand",ui);sj_evt.bind("onSaveControlError",li);n.standalone&&(sj_evt.bind(n.CollectionsGottenEventName,yi),sj_evt.bind(n.HostSCClickedEventName,vi));sj_evt.bind(n.SaveButtonFocusEventName,c)}function fr(){var r,e,o,u;n.ctrl&&(r=n.ctrl.dataset,r&&(e=r.dly,o=r.sfmc,e&&(et=parseInt(e,10)),n.savedFormCode||(n.savedFormCode=o)));rr();t&&n.isAnchorElement(t)&&n.addClickListener(t,oi);u=_ge("svctrlmsmtchlnk");u&&n.isAnchorElement(u)&&n.addClickListener(u,oi);n.flyoutContainer&&(n.standalone||n.addOutListeners(n.flyoutContainer,ki),n.flyoutContainer.hasAttribute(n.InlineCreateDataAttr)&&(g=!!n.flyoutContainer.getAttribute(n.InlineCreateDataAttr)),n.addInListeners(n.ctrlBtn,gi),n.addOutListeners(n.ctrlBtn,nr),v&&(g?n.addClickListener(i,hi):n.addClickListener(i,lt)),n.addClickListener(_ge("svctrltri"),tr,!1),n.flyoutContainer.hasAttribute(n.SaveErrorMapAttr)&&(k=n.parseJsonString(n.flyoutContainer.getAttribute(n.SaveErrorMapAttr))),n.flyoutContainer.hasAttribute(n.KCTNameMapDataAttr)&&(n.kctStringsMap=n.parseJsonString(n.flyoutContainer.getAttribute(n.KCTNameMapDataAttr))));f=g?_ge("svctrlinlineformerrdup"):_ge("svctrlnewformerrdup");ur()}var vt=!1,tt,it=!1,e,l,i,a,r,p,rt,o,s,f,ut,w,b,v,t,yt,ft,pt,et=0,y,k,d,h,wt,g=!1,ot,st=5;n.showCreateNewCollHvrBtn=ht;n.showFlyoutOnHover=c;n.onSaveControlClicked=si;fr()}(SvCtrlV2_5||(SvCtrlV2_5={})),function(n){function p(t,f,e,s,h,c,l){var v,y,w,b,k,p;c===void 0&&(c=!1);l===void 0&&(l=!1);n.collectionList&&(y=sj_ce("img"),r(y,{role:"presentation",loading:"lazy"}),sj_be(y,"error",function(){y.removeAttribute("src")}),e&&(y.src=a(e)),w=u("div","b_svcimg"),i(w,[y]),b=u("p","b_ignbt"),b.textContent=f,k=u("div","b_svclnk"),i(k,[b]),p=u("li","b_svcitm"),r(p,(v={},v[n.CollectionIdDataAttr]=t||null,v[n.KCTDataAttr]=s||null,v.tabindex="-1",v.role="option",v["aria-selected"]="false",v)),l&&o(p),i(p,[w,k]),i(n.collectionList,[p],c),n.addClickListener(p,h,!0,!1))}function w(t){if(!t||!n.collectionList)return!1;var i=_qs("[".concat(n.CollectionIdDataAttr,'="').concat(t,'"]'),n.collectionList);return i?(n.collectionList.removeChild(i),!0):!1}function c(t){var r,u;t&&n.collectionList&&(r=_qs("[".concat(n.CollectionIdDataAttr,'="').concat(t,'"]'),n.collectionList),r&&(u=r,n.collectionList.removeChild(r),i(n.collectionList,[u],!0)))}function l(){s.scrollTop=0}function a(t){var i=t;if(/\/th(\/.*|)\?/i.test(t)){var r=t.split("?"),u=r[0],f=r[1];i=u+"?"+f.replace(/&?\b[whrc]=\d+/gi,"")+n.ThumbnailQueryParams}return i}function b(t){var u=t[1],r=t[2],i=_qs("["+n.CollectionIdDataAttr+'="'+u+'"] img',n.collectionList);i&&(r?i.src=a(r):i.removeAttribute("src"))}function i(t,i,r){r===void 0&&(r=!1);var u=r?function(n){t.insertBefore(n,t.firstChild)}:function(n){t.appendChild(n)};n.iterateThroughList(i,u)}function r(n,t){for(var i in t)i&&t[i]&&n.setAttribute(i,t[i])}function u(n,t){return sj_ce(n,null,t)}function e(i){var u,e;l();u=!1;i===null||i===undefined?(e=f.getAttribute("aria-expanded"),e!=="false"||h||(n.logCollExpandClick(n.currentHoveredElement),h=!0),u=e==="true"?!1:!0):u=i;r(f,{"aria-expanded":u?"true":"false"});u?n.addElementClass(t,"xpnd"):n.removeElementClass(t,"xpnd");u&&sj_evt.fire(n.CollListExpandEventName);n.standalone&&sj_evt.fire(n.VisualStateChangedEventName,u?4:3)}function v(t){return _qs("["+n.CollectionIdDataAttr+"='"+t+"']",n.collectionList)}function o(t){var i;r(t,(i={},i[n.SavedDataAttr]="1",i["aria-selected"]="true",i))}function y(t){var i;t.removeAttribute(n.SavedDataAttr);r(t,(i={},i["aria-selected"]="false",i))}function k(n){var i=n[1],t=v(i);t&&o(t)}function d(n){var i=n[1],t=v(i);t&&y(t)}function g(t){var i=t[1];i&&n.iterateThroughList(Array.prototype.slice.call(n.collectionList.childNodes),function(n){var t=n.getAttribute("data-svcid");t in i?(o(n),c(t)):y(n)})}function nt(t){var i;n.elementHasClass(_ge("svctrlinlineform"),n.FlyoutActiveClassName)||(t.keyCode===38?(_d.activeElement.previousElementSibling&&_d.activeElement.previousElementSibling.focus(),sj_sp(t),sj_pd(t)):t.keyCode===40&&(_d.activeElement===n.collectionList?(i=_qs(".b_svcitm"))===null||i===void 0?void 0:i.focus():_d.activeElement.nextElementSibling&&_d.activeElement.nextElementSibling.focus(),sj_sp(t),sj_pd(t)))}function tt(){n.collectionList=_ge("svctrllst");f=_ge("svctrlpckr");s=_ge("svctrllstw");t=_ge("svctrlhvrpnlbtn");t&&n.addClickListener(t,function(){return e()});sj_evt.bind(n.CurrentCollIdSetEventName,k);sj_evt.bind("onCurrentCollIdUnset",d);sj_evt.bind("onChangeCollThumbnail",b);sj_evt.bind("onResetScroll",l);sj_evt.bind("onHoverElementSet",g);sj_evt.bind(n.ChevronToggleCollListEventName,function(){return e(!0)});sj_evt.bind(n.ControlAppendedEventName,function(){return e(!1)});sj_evt.bind("onSaveHover",function(){t||sj_evt.fire(n.CollListExpandEventName)});n.collectionList&&n.addListenerToElement(n.collectionList,"keydown",nt)}var f,s,t,h=!1;n.addCollectionToPicker=p;n.removeCollectionFromPicker=w;n.moveCollectionToFirst=c;tt()}(SvCtrlV2_5||(SvCtrlV2_5={})),function(n){function y(t){var e=t[0],r=t[1];if(e==n.PartnerRegisterEventName&&r){var o=r.MetadataLocationId,s=r.MetadataLocationAttr,c=r.MetaLocCompName,l=r.PersButtonClassName;u=o;i=s;h=c;f=l;w()}}function l(){var t=n.getMetadataId(n.metadataFromElement(n.metaLocElement));t&&n.localSavedItemsMap[t]?n.addElementClass(n.metaLocElement,n.SavedClassName):n.removeElementClass(n.metaLocElement,n.SavedClassName)}function r(t){sj_evt.fire(n.PersButtonInteractEventName,t.target,n.metaLocElement,i,h);sj_evt.fire(n.ChevronToggleCollListEventName)}function o(t){if(t.type==="focusout"&&!n.shiftKeyDown){var i=t.relatedTarget;i&&(n.nextFocusable=i);n.ctrlBtn.focus();sj_evt.fire(n.SaveButtonFocusEventName);return}}function p(){if(t){if(u&&(n.metaLocElement=_ge(u)),!!(n.ctrl===null||n.ctrl===void 0?void 0:n.ctrl.dataset.pbv1)){n.addClickListener(t,function(t){var r,u;n.elementHasClass(t.currentTarget,"save")?n.addToCollection(n.addItemSuccessCB,n.actionFailureCB,n.defaultCollectionId,n.metaLocElement,n.PersBtnName):(u=n.metadataFromElement(n.metaLocElement,i),n.currentElementMetadata=u,n.currentElementMid=n.getMetadataId(u),n.currentElementMid&&((r=n.localSavedItemsMap[n.currentElementMid])===null||r===void 0?void 0:r.lastCollection)&&n.removeFromCollection(n.removeItemSuccessCB,n.actionFailureCB,n.localSavedItemsMap[n.currentElementMid].lastCollection,n.PersBtnName,n.metaLocElement))},!0);return}n.addInListeners(t,r);n.addOutListeners(t,o);n.addClickListener(t,s,!0,!0);n.metaLocElement&&(l(),c=new MutationObserver(l),c.observe(n.metaLocElement,{attributes:!0,attributeFilter:[i]}))}}function s(){n.onSaveControlClicked(n.currentElementMid,n.currentHoveredElement,!0)}function w(){if(f){v();var n=_qs("."+f,_d.body);n&&(t=n,p())}}function a(t){var r=t[0],i=t[2],u=t[4];u&&i===n.getMetadataId(n.metadataFromElement(n.metaLocElement))&&e&&(r==="onSaveAdd"&&n.localSavedItemsMap[i]||r==="onSaveDel"&&!n.localSavedItemsMap[i])&&e()}function v(){t&&(n.metaLocElement=null,t.removeEventListener("mouseenter",r),t.removeEventListener("focusin",r),t.removeEventListener("mouseleave",o),t.removeEventListener("focusout",o),t.removeEventListener("click",s),t.removeEventListener("keydown",s),t=null)}var u,i,h,f,e,t,c;sj_evt.bind("onSaveRegButton",function(n){var t=n[1];e=t});sj_evt.bind(n.PartnerRegisterEventName,y);sj_evt.bind(n.DeregisterPersBtnEventName,v);sj_evt.bind("ajax.unload",function(){t&&t.removeEventListener("mouseenter",r)});sj_evt.bind("onSaveDel",a);sj_evt.bind("onSaveAdd",a)}(SvCtrlV2_5||(SvCtrlV2_5={}))